{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Settings.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Game=_ref=>{let{mode,operations,timeLimit,questionCount,maxDigits,onGameOver,onExit}=_ref;const[problem,setProblem]=useState({});const[userInput,setUserInput]=useState('');const[score,setScore]=useState(0);const[timeLeft,setTimeLeft]=useState(timeLimit);const[questionsAnswered,setQuestionsAnswered]=useState(0);const[startTime,setStartTime]=useState(Date.now());const[timeUsed,setTimeUsed]=useState(0);const generateMathProblem=(maxDigits,operations)=>{const availableOperators=[];if(operations.addition)availableOperators.push('+');if(operations.subtraction)availableOperators.push('-');if(operations.multiplication)availableOperators.push('*');if(operations.division)availableOperators.push('/');const maxNumber=Math.pow(10,maxDigits)-1;const num1=Math.floor(Math.random()*maxNumber)+1;const num2=Math.floor(Math.random()*maxNumber)+1;const operator=availableOperators[Math.floor(Math.random()*availableOperators.length)];let problem;let answer;if(operator==='/'){let divisor,dividend;do{divisor=Math.floor(Math.random()*maxNumber)+1;dividend=divisor*(Math.floor(Math.random()*maxNumber)+1);}while(dividend>maxNumber||divisor>maxNumber);problem=\"\".concat(dividend,\" \").concat(operator,\" \").concat(divisor);answer=dividend/divisor;}else{problem=\"\".concat(num1,\" \").concat(operator,\" \").concat(num2);answer=eval(problem);// Use eval cautiously\n}return{problem,answer};};useEffect(()=>{setProblem(generateMathProblem(maxDigits,operations));if(mode==='time'){const timer=setInterval(()=>{setTimeLeft(prev=>{if(prev<=1){clearInterval(timer);onGameOver(score);}return prev-1;});},1000);return()=>clearInterval(timer);}},[mode,onGameOver,score,timeLimit,maxDigits,operations]);const handleInputChange=e=>{setUserInput(e.target.value);if(parseFloat(e.target.value)===problem.answer){const endTime=Date.now();const timeUsed=(endTime-startTime)/1000;// Time used in seconds\nsetTimeUsed(timeUsed);if(mode==='questions'){setScore(prev=>parseFloat((prev+timeUsed).toFixed(2)));// Accumulate time used as score and round to two decimal points\n}else{setScore(prev=>prev+1);// Increment score normally\n}setQuestionsAnswered(prev=>prev+1);setProblem(generateMathProblem(maxDigits,operations));setUserInput('');setStartTime(Date.now());// Reset start time for the next question\n}};useEffect(()=>{if(mode==='questions'&&questionsAnswered>=questionCount){onGameOver(score);}},[questionsAnswered,mode,questionCount,onGameOver,timeLeft]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"bt\",onClick:onExit,style:{position:'absolute',top:10,right:10},children:[/*#__PURE__*/_jsx(\"span\",{class:\"shadow\"}),/*#__PURE__*/_jsx(\"span\",{class:\"depth\"}),/*#__PURE__*/_jsx(\"span\",{class:\"content\",children:\"Exit\"}),\"Exit\"]}),mode==='questions'&&/*#__PURE__*/_jsxs(\"h2\",{children:[\"Time Used: \",timeUsed,\"s \"]}),mode==='time'&&/*#__PURE__*/_jsxs(\"h2\",{children:[\"Score: \",score]}),/*#__PURE__*/_jsxs(\"div\",{className:\"problem-container\",children:[mode==='time'&&/*#__PURE__*/_jsxs(\"h3\",{children:[\"Time Left: \",timeLeft,\"s\"]}),mode==='questions'&&/*#__PURE__*/_jsxs(\"h3\",{children:[\"Questions Answered: \",questionsAnswered,\"/\",questionCount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qcontainer\",children:[/*#__PURE__*/_jsx(\"p1\",{children:problem.problem}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:userInput,onChange:handleInputChange,autoFocus:true})]})]})]});};export default Game;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Game","_ref","mode","operations","timeLimit","questionCount","maxDigits","onGameOver","onExit","problem","setProblem","userInput","setUserInput","score","setScore","timeLeft","setTimeLeft","questionsAnswered","setQuestionsAnswered","startTime","setStartTime","Date","now","timeUsed","setTimeUsed","generateMathProblem","availableOperators","addition","push","subtraction","multiplication","division","maxNumber","Math","pow","num1","floor","random","num2","operator","length","answer","divisor","dividend","concat","eval","timer","setInterval","prev","clearInterval","handleInputChange","e","target","value","parseFloat","endTime","toFixed","children","className","onClick","style","position","top","right","class","type","onChange","autoFocus"],"sources":["/Users/christalchen/Documents/react/arithmetic/src/Game.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Settings.css';\n\nconst Game = ({ mode, operations, timeLimit, questionCount, maxDigits, onGameOver, onExit }) => {\n    const [problem, setProblem] = useState({});\n    const [userInput, setUserInput] = useState('');\n    const [score, setScore] = useState(0);\n    const [timeLeft, setTimeLeft] = useState(timeLimit);\n    const [questionsAnswered, setQuestionsAnswered] = useState(0);\n    const [startTime, setStartTime] = useState(Date.now());\n    const [timeUsed, setTimeUsed] = useState(0);\n\n    const generateMathProblem = (maxDigits, operations) => {\n        const availableOperators = [];\n        if (operations.addition) availableOperators.push('+');\n        if (operations.subtraction) availableOperators.push('-');\n        if (operations.multiplication) availableOperators.push('*');\n        if (operations.division) availableOperators.push('/');\n      \n        const maxNumber = Math.pow(10, maxDigits) - 1;\n        const num1 = Math.floor(Math.random() * maxNumber) + 1;\n        const num2 = Math.floor(Math.random() * maxNumber) + 1;\n        const operator =\n          availableOperators[\n            Math.floor(Math.random() * availableOperators.length)\n          ];\n      \n        let problem;\n        let answer;\n      \n        if (operator === '/') {\n          let divisor, dividend;\n          do {\n            divisor = Math.floor(Math.random() * maxNumber) + 1;\n            dividend = divisor * (Math.floor(Math.random() * maxNumber) + 1);\n          } while (dividend > maxNumber || divisor > maxNumber);\n        \n          problem = `${dividend} ${operator} ${divisor}`;\n          answer = dividend / divisor;\n        } else {\n          problem = `${num1} ${operator} ${num2}`;\n          answer = eval(problem); // Use eval cautiously\n        }\n      \n        return { problem, answer };\n      };\n      \n\n  \n\n      useEffect(() => {\n        setProblem(generateMathProblem(maxDigits, operations));\n    \n        if (mode === 'time') {\n          const timer = setInterval(() => {\n            setTimeLeft((prev) => {\n              if (prev <= 1) {\n                clearInterval(timer);\n                onGameOver(score);\n              }\n              return prev - 1;\n            });\n          }, 1000);\n          return () => clearInterval(timer);\n        }\n      }, [mode, onGameOver, score, timeLimit, maxDigits, operations]);\n\n\n      const handleInputChange = (e) => {\n        setUserInput(e.target.value);\n        if (parseFloat(e.target.value) === problem.answer) {\n          const endTime = Date.now();\n          const timeUsed = (endTime - startTime) / 1000; // Time used in seconds\n          setTimeUsed(timeUsed);\n    \n          if (mode === 'questions') {\n            setScore((prev) => parseFloat((prev + timeUsed).toFixed(2))); // Accumulate time used as score and round to two decimal points\n          } else {\n            setScore((prev) => prev + 1); // Increment score normally\n          }\n    \n          setQuestionsAnswered((prev) => prev + 1);\n          setProblem(generateMathProblem(maxDigits, operations));\n          setUserInput('');\n          setStartTime(Date.now()); // Reset start time for the next question\n        }\n      };\n    \n\n      useEffect(() => {\n        if (mode === 'questions' && questionsAnswered >= questionCount) {\n          onGameOver(score);\n        }\n      }, [questionsAnswered, mode, questionCount, onGameOver, timeLeft]);\n    \n      return (\n        <div>\n          <button className=\"bt\" onClick={onExit} style={{ position: 'absolute', top: 10, right: 10 }}>\n            <span class=\"shadow\"></span>\n            <span class=\"depth\"></span>\n            <span class=\"content\">Exit</span>\n            Exit\n          </button>\n\n          {mode === 'questions' && <h2>Time Used: {timeUsed}s </h2>}\n          {mode ==='time' && <h2>Score: {score}</h2>}\n\n          <div className=\"problem-container\">\n\n          {mode === 'time' && <h3>Time Left: {timeLeft}s</h3>}\n          {mode === 'questions' && (\n            <h3>Questions Answered: {questionsAnswered}/{questionCount}</h3>\n          )}\n          <div className=\"qcontainer\">\n          <p1>{problem.problem}</p1>\n          <input\n            type=\"number\"\n            value={userInput}\n            onChange={handleInputChange}\n            autoFocus\n          />\n          </div>\n\n          </div>\n\n        </div>\n      );\n    };\n    \n    export default Game;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAmF,IAAlF,CAAEC,IAAI,CAAEC,UAAU,CAAEC,SAAS,CAAEC,aAAa,CAAEC,SAAS,CAAEC,UAAU,CAAEC,MAAO,CAAC,CAAAP,IAAA,CACvF,KAAM,CAACQ,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC1C,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACqB,QAAQ,CAAEC,WAAW,CAAC,CAAGtB,QAAQ,CAACU,SAAS,CAAC,CACnD,KAAM,CAACa,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGxB,QAAQ,CAAC,CAAC,CAAC,CAC7D,KAAM,CAACyB,SAAS,CAAEC,YAAY,CAAC,CAAG1B,QAAQ,CAAC2B,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,CACtD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAG9B,QAAQ,CAAC,CAAC,CAAC,CAE3C,KAAM,CAAA+B,mBAAmB,CAAGA,CAACnB,SAAS,CAAEH,UAAU,GAAK,CACnD,KAAM,CAAAuB,kBAAkB,CAAG,EAAE,CAC7B,GAAIvB,UAAU,CAACwB,QAAQ,CAAED,kBAAkB,CAACE,IAAI,CAAC,GAAG,CAAC,CACrD,GAAIzB,UAAU,CAAC0B,WAAW,CAAEH,kBAAkB,CAACE,IAAI,CAAC,GAAG,CAAC,CACxD,GAAIzB,UAAU,CAAC2B,cAAc,CAAEJ,kBAAkB,CAACE,IAAI,CAAC,GAAG,CAAC,CAC3D,GAAIzB,UAAU,CAAC4B,QAAQ,CAAEL,kBAAkB,CAACE,IAAI,CAAC,GAAG,CAAC,CAErD,KAAM,CAAAI,SAAS,CAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,CAAE5B,SAAS,CAAC,CAAG,CAAC,CAC7C,KAAM,CAAA6B,IAAI,CAAGF,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,CAAC,CAAC,CAAGL,SAAS,CAAC,CAAG,CAAC,CACtD,KAAM,CAAAM,IAAI,CAAGL,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,CAAC,CAAC,CAAGL,SAAS,CAAC,CAAG,CAAC,CACtD,KAAM,CAAAO,QAAQ,CACZb,kBAAkB,CAChBO,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,CAAC,CAAC,CAAGX,kBAAkB,CAACc,MAAM,CAAC,CACtD,CAEH,GAAI,CAAA/B,OAAO,CACX,GAAI,CAAAgC,MAAM,CAEV,GAAIF,QAAQ,GAAK,GAAG,CAAE,CACpB,GAAI,CAAAG,OAAO,CAAEC,QAAQ,CACrB,EAAG,CACDD,OAAO,CAAGT,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,CAAC,CAAC,CAAGL,SAAS,CAAC,CAAG,CAAC,CACnDW,QAAQ,CAAGD,OAAO,EAAIT,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,CAAC,CAAC,CAAGL,SAAS,CAAC,CAAG,CAAC,CAAC,CAClE,CAAC,MAAQW,QAAQ,CAAGX,SAAS,EAAIU,OAAO,CAAGV,SAAS,EAEpDvB,OAAO,IAAAmC,MAAA,CAAMD,QAAQ,MAAAC,MAAA,CAAIL,QAAQ,MAAAK,MAAA,CAAIF,OAAO,CAAE,CAC9CD,MAAM,CAAGE,QAAQ,CAAGD,OAAO,CAC7B,CAAC,IAAM,CACLjC,OAAO,IAAAmC,MAAA,CAAMT,IAAI,MAAAS,MAAA,CAAIL,QAAQ,MAAAK,MAAA,CAAIN,IAAI,CAAE,CACvCG,MAAM,CAAGI,IAAI,CAACpC,OAAO,CAAC,CAAE;AAC1B,CAEA,MAAO,CAAEA,OAAO,CAAEgC,MAAO,CAAC,CAC5B,CAAC,CAKD9C,SAAS,CAAC,IAAM,CACde,UAAU,CAACe,mBAAmB,CAACnB,SAAS,CAAEH,UAAU,CAAC,CAAC,CAEtD,GAAID,IAAI,GAAK,MAAM,CAAE,CACnB,KAAM,CAAA4C,KAAK,CAAGC,WAAW,CAAC,IAAM,CAC9B/B,WAAW,CAAEgC,IAAI,EAAK,CACpB,GAAIA,IAAI,EAAI,CAAC,CAAE,CACbC,aAAa,CAACH,KAAK,CAAC,CACpBvC,UAAU,CAACM,KAAK,CAAC,CACnB,CACA,MAAO,CAAAmC,IAAI,CAAG,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,IAAI,CAAC,CACR,MAAO,IAAMC,aAAa,CAACH,KAAK,CAAC,CACnC,CACF,CAAC,CAAE,CAAC5C,IAAI,CAAEK,UAAU,CAAEM,KAAK,CAAET,SAAS,CAAEE,SAAS,CAAEH,UAAU,CAAC,CAAC,CAG/D,KAAM,CAAA+C,iBAAiB,CAAIC,CAAC,EAAK,CAC/BvC,YAAY,CAACuC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC5B,GAAIC,UAAU,CAACH,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,GAAK5C,OAAO,CAACgC,MAAM,CAAE,CACjD,KAAM,CAAAc,OAAO,CAAGlC,IAAI,CAACC,GAAG,CAAC,CAAC,CAC1B,KAAM,CAAAC,QAAQ,CAAG,CAACgC,OAAO,CAAGpC,SAAS,EAAI,IAAI,CAAE;AAC/CK,WAAW,CAACD,QAAQ,CAAC,CAErB,GAAIrB,IAAI,GAAK,WAAW,CAAE,CACxBY,QAAQ,CAAEkC,IAAI,EAAKM,UAAU,CAAC,CAACN,IAAI,CAAGzB,QAAQ,EAAEiC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;AAChE,CAAC,IAAM,CACL1C,QAAQ,CAAEkC,IAAI,EAAKA,IAAI,CAAG,CAAC,CAAC,CAAE;AAChC,CAEA9B,oBAAoB,CAAE8B,IAAI,EAAKA,IAAI,CAAG,CAAC,CAAC,CACxCtC,UAAU,CAACe,mBAAmB,CAACnB,SAAS,CAAEH,UAAU,CAAC,CAAC,CACtDS,YAAY,CAAC,EAAE,CAAC,CAChBQ,YAAY,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,CAAE;AAC5B,CACF,CAAC,CAGD3B,SAAS,CAAC,IAAM,CACd,GAAIO,IAAI,GAAK,WAAW,EAAIe,iBAAiB,EAAIZ,aAAa,CAAE,CAC9DE,UAAU,CAACM,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACI,iBAAiB,CAAEf,IAAI,CAAEG,aAAa,CAAEE,UAAU,CAAEQ,QAAQ,CAAC,CAAC,CAElE,mBACEhB,KAAA,QAAA0D,QAAA,eACE1D,KAAA,WAAQ2D,SAAS,CAAC,IAAI,CAACC,OAAO,CAAEnD,MAAO,CAACoD,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAE,CAAAN,QAAA,eAC1F5D,IAAA,SAAMmE,KAAK,CAAC,QAAQ,CAAO,CAAC,cAC5BnE,IAAA,SAAMmE,KAAK,CAAC,OAAO,CAAO,CAAC,cAC3BnE,IAAA,SAAMmE,KAAK,CAAC,SAAS,CAAAP,QAAA,CAAC,MAAI,CAAM,CAAC,OAEnC,EAAQ,CAAC,CAERvD,IAAI,GAAK,WAAW,eAAIH,KAAA,OAAA0D,QAAA,EAAI,aAAW,CAAClC,QAAQ,CAAC,IAAE,EAAI,CAAC,CACxDrB,IAAI,GAAI,MAAM,eAAIH,KAAA,OAAA0D,QAAA,EAAI,SAAO,CAAC5C,KAAK,EAAK,CAAC,cAE1Cd,KAAA,QAAK2D,SAAS,CAAC,mBAAmB,CAAAD,QAAA,EAEjCvD,IAAI,GAAK,MAAM,eAAIH,KAAA,OAAA0D,QAAA,EAAI,aAAW,CAAC1C,QAAQ,CAAC,GAAC,EAAI,CAAC,CAClDb,IAAI,GAAK,WAAW,eACnBH,KAAA,OAAA0D,QAAA,EAAI,sBAAoB,CAACxC,iBAAiB,CAAC,GAAC,CAACZ,aAAa,EAAK,CAChE,cACDN,KAAA,QAAK2D,SAAS,CAAC,YAAY,CAAAD,QAAA,eAC3B5D,IAAA,OAAA4D,QAAA,CAAKhD,OAAO,CAACA,OAAO,CAAK,CAAC,cAC1BZ,IAAA,UACEoE,IAAI,CAAC,QAAQ,CACbZ,KAAK,CAAE1C,SAAU,CACjBuD,QAAQ,CAAEhB,iBAAkB,CAC5BiB,SAAS,MACV,CAAC,EACG,CAAC,EAED,CAAC,EAEH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnE,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}