{"ast":null,"code":"var _jsxFileName = \"/Users/christalchen/Documents/coding/mathmania/src/Game.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './btStyle.css';\nimport './Game.css';\nimport { generateProblem } from './problem';\nimport { createTimer, utils } from 'animejs';\nimport { click } from './sound';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Game = ({\n  mode,\n  operations,\n  timeLimit,\n  questionCount,\n  maxDigits,\n  onGameOver,\n  onExit\n}) => {\n  _s();\n  const [problem, setProblem] = useState({});\n  const [userInput, setUserInput] = useState('');\n  const [score, setScore] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(timeLimit);\n  const [questionsAnswered, setQuestionsAnswered] = useState(0);\n  const [startTime, setStartTime] = useState(Date.now());\n  const [timeUsed, setTimeUsed] = useState(0);\n  const scoreRef = useRef(score);\n  useEffect(() => {\n    scoreRef.current = score;\n  }, [score]);\n  useEffect(() => {\n    setProblem(generateProblem(maxDigits, operations));\n    const [$time] = utils.$('.time');\n    let timerInstance;\n    if (mode === 'time') {\n      timerInstance = createTimer({\n        duration: timeLimit * 1000,\n        onComplete: () => onGameOver(`Your Score: ${scoreRef.current}`),\n        onUpdate: self => $time.innerHTML = self.currentTime,\n        onUpdate: self => setTimeLeft((timeLimit * 1000 - self.currentTime) / 1000)\n      });\n    } else {\n      timerInstance = createTimer({\n        autoplay: true,\n        onUpdate: self => $time.innerHTML = self.currentTime,\n        onUpdate: self => setTimeUsed(self.currentTime / 1000)\n      });\n    }\n\n    // if (mode === 'time') {\n    //     const timer = setInterval(() => {\n    //         setTimeLeft((prev) => {\n    //             if (prev <= 1) {\n    //                 clearInterval(timer);\n    //                 onGameOver(score);\n    //             }\n    //             return prev - 1;\n    //         });\n    //     }, 1000);\n    //     return () => clearInterval(timer);\n    // }\n    return () => {\n      if (timerInstance && typeof timerInstance.pause === 'function') {\n        timerInstance.pause();\n      }\n    };\n  }, [mode, onGameOver, timeLimit, maxDigits, operations]);\n  const handleInputChange = e => {\n    setUserInput(e.target.value);\n    if (parseFloat(e.target.value) === problem.a) {\n      setScore(prev => prev + 1); // Increment score\n      setQuestionsAnswered(prev => prev + 1);\n      setProblem(generateProblem(maxDigits, operations));\n      setUserInput('');\n    }\n  };\n  useEffect(() => {\n    if (mode === 'questions' && questionsAnswered >= questionCount) {\n      onGameOver(`Time Used: ${timeUsed.toFixed(1)}`);\n    }\n  }, [questionsAnswered, mode, questionCount, onGameOver, timeUsed]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bt\",\n      onClick: {\n        onExit\n      },\n      style: {\n        position: 'absolute',\n        top: 10,\n        right: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"shadow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"depth\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"content\",\n        children: \"Exit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), \"Exit\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), mode === 'questions' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Time Used:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"timer-header\",\n        children: [timeUsed.toFixed(1), \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this), mode === 'time' && /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Score: \", score]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"problem-container\",\n      children: [mode === 'time' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Time Left:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"timer-header2\",\n          children: [timeLeft.toFixed(1), \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), mode === 'questions' && /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Questions Answered: \", questionsAnswered, \"/\", questionCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"qcontainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"p1\", {\n          children: problem.q\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: userInput,\n          onChange: handleInputChange,\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n_s(Game, \"0aGlzU7t7ID9L/uuf3MTqGMBonw=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useState","useEffect","useRef","generateProblem","createTimer","utils","click","jsxDEV","_jsxDEV","Game","mode","operations","timeLimit","questionCount","maxDigits","onGameOver","onExit","_s","problem","setProblem","userInput","setUserInput","score","setScore","timeLeft","setTimeLeft","questionsAnswered","setQuestionsAnswered","startTime","setStartTime","Date","now","timeUsed","setTimeUsed","scoreRef","current","$time","$","timerInstance","duration","onComplete","onUpdate","self","innerHTML","currentTime","autoplay","pause","handleInputChange","e","target","value","parseFloat","a","prev","toFixed","children","className","onClick","style","position","top","right","class","fileName","_jsxFileName","lineNumber","columnNumber","q","type","onChange","autoFocus","_c","$RefreshReg$"],"sources":["/Users/christalchen/Documents/coding/mathmania/src/Game.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './btStyle.css';\nimport './Game.css';\nimport { generateProblem } from './problem';\nimport { createTimer, utils } from 'animejs';\nimport { click } from './sound';\n\nconst Game = ({ mode, operations, timeLimit, questionCount, maxDigits, onGameOver, onExit }) => {\n    const [problem, setProblem] = useState({});\n    const [userInput, setUserInput] = useState('');\n    const [score, setScore] = useState(0);\n    const [timeLeft, setTimeLeft] = useState(timeLimit);\n    const [questionsAnswered, setQuestionsAnswered] = useState(0);\n    const [startTime, setStartTime] = useState(Date.now());\n    const [timeUsed, setTimeUsed] = useState(0);\n    const scoreRef = useRef(score);\n    useEffect(() => {\n        scoreRef.current = score;\n    }, [score]);\n\n    useEffect(() => {\n        setProblem(generateProblem(maxDigits, operations));\n\n        const [$time] = utils.$('.time');\n        let timerInstance;\n\n        if (mode === 'time') {\n            timerInstance = createTimer({\n                duration: timeLimit * 1000,\n                onComplete: () => onGameOver(`Your Score: ${scoreRef.current}`),\n                onUpdate: self => $time.innerHTML = self.currentTime,\n                onUpdate: self => setTimeLeft(((timeLimit * 1000 - self.currentTime) / 1000)),\n            });\n        } else {\n            timerInstance = createTimer({\n                autoplay: true,\n                onUpdate: self => $time.innerHTML = self.currentTime,\n                onUpdate: self => setTimeUsed(self.currentTime / 1000),\n            });\n        }\n\n        // if (mode === 'time') {\n        //     const timer = setInterval(() => {\n        //         setTimeLeft((prev) => {\n        //             if (prev <= 1) {\n        //                 clearInterval(timer);\n        //                 onGameOver(score);\n        //             }\n        //             return prev - 1;\n        //         });\n        //     }, 1000);\n        //     return () => clearInterval(timer);\n        // }\n        return () => {\n        if (timerInstance && typeof timerInstance.pause === 'function') {\n            timerInstance.pause();\n        }\n    };\n    }, [mode, onGameOver, timeLimit, maxDigits, operations]);\n\n\n    const handleInputChange = (e) => {\n        setUserInput(e.target.value);\n        if (parseFloat(e.target.value) === problem.a) {\n            setScore((prev) => prev + 1); // Increment score\n            setQuestionsAnswered((prev) => prev + 1);\n            setProblem(generateProblem(maxDigits, operations));\n            setUserInput('');\n        }\n    };\n\n    useEffect(() => {\n        if (mode === 'questions' && questionsAnswered >= questionCount) {\n            onGameOver(`Time Used: ${timeUsed.toFixed(1)}`);\n        }\n    }, [questionsAnswered, mode, questionCount, onGameOver, timeUsed]);\n\n    return (\n        <div>\n            <button className=\"bt\" onClick={{onExit}} style={{ position: 'absolute', top: 10, right: 10 }}>\n                <span class=\"shadow\"></span>\n                <span class=\"depth\"></span>\n                <span class=\"content\">Exit</span>\n                Exit\n            </button>\n\n            {mode === 'questions' &&\n\n                <div className=\"timer-container\">\n                    <h2>Time Used:</h2>\n                    <header className=\"timer-header\">{timeUsed.toFixed(1)}s</header>\n                </div>\n\n            }\n            {mode === 'time' && <h2>Score: {score}</h2>}\n\n            <div className=\"problem-container\">\n\n                {mode === 'time' && \n                \n                <div className=\"timer-container\">\n                    <h3>Time Left:</h3>\n                    <header className=\"timer-header2\">{timeLeft.toFixed(1)}s</header>\n                </div>}\n                {mode === 'questions' && (<h3>Questions Answered: {questionsAnswered}/{questionCount}</h3>)}\n                <div className=\"qcontainer\">\n                    <p1>{problem.q}</p1>\n                    <input\n                        type=\"number\"\n                        value={userInput}\n                        onChange={handleInputChange}\n                        autoFocus\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}